(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const M={};function Qt(n){M.context=n}const Xt=(n,e)=>n===e,Yt=Symbol("solid-track"),ve={equals:Xt};let _t=bt;const V=1,_e=2,yt={owned:null,cleanups:null,context:null,owner:null};var O=null;let X=null,L=null,T=null,q=null,We=0;function he(n,e){const t=L,i=O,s=n.length===0,o=s?yt:{owned:null,cleanups:null,context:null,owner:e||i},l=s?n:()=>n(()=>re(()=>He(o)));O=o,L=null;try{return ae(l,!0)}finally{L=t,O=i}}function w(n,e){e=e?Object.assign({},ve,e):ve;const t={value:n,observers:null,observerSlots:null,comparator:e.equals||void 0},i=s=>(typeof s=="function"&&(s=s(t.value)),$t(t,s));return[wt.bind(t),i]}function k(n,e,t){const i=qe(n,e,!1,V);le(i)}function ne(n,e,t){_t=Jt;const i=qe(n,e,!1,V);i.user=!0,q?q.push(i):le(i)}function ie(n,e,t){t=t?Object.assign({},ve,t):ve;const i=qe(n,e,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=t.equals||void 0,le(i),wt.bind(i)}function re(n){let e,t=L;return L=null,e=n(),L=t,e}function zt(n){return O===null||(O.cleanups===null?O.cleanups=[n]:O.cleanups.push(n)),n}function wt(){const n=X;if(this.sources&&(this.state||n))if(this.state===V||n)le(this);else{const e=T;T=null,ae(()=>we(this),!1),T=e}if(L){const e=this.observers?this.observers.length:0;L.sources?(L.sources.push(this),L.sourceSlots.push(e)):(L.sources=[this],L.sourceSlots=[e]),this.observers?(this.observers.push(L),this.observerSlots.push(L.sources.length-1)):(this.observers=[L],this.observerSlots=[L.sources.length-1])}return this.value}function $t(n,e,t){let i=n.value;return(!n.comparator||!n.comparator(i,e))&&(n.value=e,n.observers&&n.observers.length&&ae(()=>{for(let s=0;s<n.observers.length;s+=1){const o=n.observers[s],l=X&&X.running;l&&X.disposed.has(o),(l&&!o.tState||!l&&!o.state)&&(o.pure?T.push(o):q.push(o),o.observers&&St(o)),l||(o.state=V)}if(T.length>1e6)throw T=[],new Error},!1)),e}function le(n){if(!n.fn)return;He(n);const e=O,t=L,i=We;L=O=n,Kt(n,n.value,i),L=t,O=e}function Kt(n,e,t){let i;try{i=n.fn(e)}catch(s){n.pure&&(n.state=V),xt(s)}(!n.updatedAt||n.updatedAt<=t)&&(n.updatedAt!=null&&"observers"in n?$t(n,i):n.value=i,n.updatedAt=t)}function qe(n,e,t,i=V,s){const o={fn:n,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:O,context:null,pure:t};return O===null||O!==yt&&(O.owned?O.owned.push(o):O.owned=[o]),o}function ye(n){const e=X;if(n.state===0||e)return;if(n.state===_e||e)return we(n);if(n.suspense&&re(n.suspense.inFallback))return n.suspense.effects.push(n);const t=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<We);)(n.state||e)&&t.push(n);for(let i=t.length-1;i>=0;i--)if(n=t[i],n.state===V||e)le(n);else if(n.state===_e||e){const s=T;T=null,ae(()=>we(n,t[0]),!1),T=s}}function ae(n,e){if(T)return n();let t=!1;e||(T=[]),q?t=!0:q=[],We++;try{const i=n();return Gt(t),i}catch(i){T||(q=null),xt(i)}}function Gt(n){if(T&&(bt(T),T=null),n)return;const e=q;q=null,e.length&&ae(()=>_t(e),!1)}function bt(n){for(let e=0;e<n.length;e++)ye(n[e])}function Jt(n){let e,t=0;for(e=0;e<n.length;e++){const i=n[e];i.user?n[t++]=i:ye(i)}for(M.context&&Qt(),e=0;e<t;e++)ye(n[e])}function we(n,e){const t=X;n.state=0;for(let i=0;i<n.sources.length;i+=1){const s=n.sources[i];s.sources&&(s.state===V||t?s!==e&&ye(s):(s.state===_e||t)&&we(s,e))}}function St(n){const e=X;for(let t=0;t<n.observers.length;t+=1){const i=n.observers[t];(!i.state||e)&&(i.state=_e,i.pure?T.push(i):q.push(i),i.observers&&St(i))}}function He(n){let e;if(n.sources)for(;n.sources.length;){const t=n.sources.pop(),i=n.sourceSlots.pop(),s=t.observers;if(s&&s.length){const o=s.pop(),l=t.observerSlots.pop();i<s.length&&(o.sourceSlots[l]=i,s[i]=o,t.observerSlots[i]=l)}}if(n.owned){for(e=0;e<n.owned.length;e++)He(n.owned[e]);n.owned=null}if(n.cleanups){for(e=0;e<n.cleanups.length;e++)n.cleanups[e]();n.cleanups=null}n.state=0,n.context=null}function Zt(n){return n instanceof Error||typeof n=="string"?n:new Error("Unknown error")}function xt(n){throw n=Zt(n),n}const en=Symbol("fallback");function ze(n){for(let e=0;e<n.length;e++)n[e]()}function tn(n,e,t={}){let i=[],s=[],o=[],l=0,r=e.length>1?[]:null;return zt(()=>ze(o)),()=>{let u=n()||[],c,a;return u[Yt],re(()=>{let d=u.length,v,x,h,m,_,f,C,y,R;if(d===0)l!==0&&(ze(o),o=[],i=[],s=[],l=0,r&&(r=[])),t.fallback&&(i=[en],s[0]=he(I=>(o[0]=I,t.fallback())),l=1);else if(l===0){for(s=new Array(d),a=0;a<d;a++)i[a]=u[a],s[a]=he(g);l=d}else{for(h=new Array(d),m=new Array(d),r&&(_=new Array(d)),f=0,C=Math.min(l,d);f<C&&i[f]===u[f];f++);for(C=l-1,y=d-1;C>=f&&y>=f&&i[C]===u[y];C--,y--)h[y]=s[C],m[y]=o[C],r&&(_[y]=r[C]);for(v=new Map,x=new Array(y+1),a=y;a>=f;a--)R=u[a],c=v.get(R),x[a]=c===void 0?-1:c,v.set(R,a);for(c=f;c<=C;c++)R=i[c],a=v.get(R),a!==void 0&&a!==-1?(h[a]=s[c],m[a]=o[c],r&&(_[a]=r[c]),a=x[a],v.set(R,a)):o[c]();for(a=f;a<d;a++)a in h?(s[a]=h[a],o[a]=m[a],r&&(r[a]=_[a],r[a](a))):s[a]=he(g);s=s.slice(0,l=d),i=u.slice(0)}return s});function g(d){if(o[a]=d,r){const[v,x]=w(a);return r[a]=x,e(u[a],v)}return e(u[a])}}}function E(n,e){return re(()=>n(e||{}))}function nn(n){const e="fallback"in n&&{fallback:()=>n.fallback};return ie(tn(()=>n.each,n.children,e||void 0))}function A(n){let e=!1;const t=n.keyed,i=ie(()=>n.when,void 0,{equals:(s,o)=>e?s===o:!s==!o});return ie(()=>{const s=i();if(s){const o=n.children,l=typeof o=="function"&&o.length>0;return e=t||l,l?re(()=>o(s)):o}return n.fallback})}function sn(n,e,t){let i=t.length,s=e.length,o=i,l=0,r=0,u=e[s-1].nextSibling,c=null;for(;l<s||r<o;){if(e[l]===t[r]){l++,r++;continue}for(;e[s-1]===t[o-1];)s--,o--;if(s===l){const a=o<i?r?t[r-1].nextSibling:t[o-r]:u;for(;r<o;)n.insertBefore(t[r++],a)}else if(o===r)for(;l<s;)(!c||!c.has(e[l]))&&e[l].remove(),l++;else if(e[l]===t[o-1]&&t[r]===e[s-1]){const a=e[--s].nextSibling;n.insertBefore(t[r++],e[l++].nextSibling),n.insertBefore(t[--o],a),e[s]=t[o]}else{if(!c){c=new Map;let g=r;for(;g<o;)c.set(t[g],g++)}const a=c.get(e[l]);if(a!=null)if(r<a&&a<o){let g=l,d=1,v;for(;++g<s&&g<o&&!((v=c.get(e[g]))==null||v!==a+d);)d++;if(d>a-r){const x=e[l];for(;r<a;)n.insertBefore(t[r++],x)}else n.replaceChild(t[r++],e[l++])}else l++;else e[l++].remove()}}}const Ke="_$DX_DELEGATE";function on(n,e,t,i={}){let s;return he(o=>{s=o,e===document?n():p(e,n(),e.firstChild?null:void 0,t)},i.owner),()=>{s(),e.textContent=""}}function S(n,e,t){const i=document.createElement("template");i.innerHTML=n;let s=i.content.firstChild;return t&&(s=s.firstChild),s}function H(n,e=window.document){const t=e[Ke]||(e[Ke]=new Set);for(let i=0,s=n.length;i<s;i++){const o=n[i];t.has(o)||(t.add(o),e.addEventListener(o,rn))}}function F(n,e,t){t==null?n.removeAttribute(e):n.setAttribute(e,t)}function j(n,e){e==null?n.removeAttribute("class"):n.className=e}function p(n,e,t,i){if(t!==void 0&&!i&&(i=[]),typeof e!="function")return $e(n,e,i,t);k(s=>$e(n,e(),s,t),i)}function rn(n){const e=`$$${n.type}`;let t=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==t&&Object.defineProperty(n,"target",{configurable:!0,value:t}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return t||document}}),M.registry&&!M.done&&(M.done=!0,document.querySelectorAll("[id^=pl-]").forEach(i=>i.remove()));t!==null;){const i=t[e];if(i&&!t.disabled){const s=t[`${e}Data`];if(s!==void 0?i.call(t,s,n):i.call(t,n),n.cancelBubble)return}t=t.host&&t.host!==t&&t.host instanceof Node?t.host:t.parentNode}}function $e(n,e,t,i,s){for(M.context&&!t&&(t=[...n.childNodes]);typeof t=="function";)t=t();if(e===t)return t;const o=typeof e,l=i!==void 0;if(n=l&&t[0]&&t[0].parentNode||n,o==="string"||o==="number"){if(M.context)return t;if(o==="number"&&(e=e.toString()),l){let r=t[0];r&&r.nodeType===3?r.data=e:r=document.createTextNode(e),t=K(n,t,i,r)}else t!==""&&typeof t=="string"?t=n.firstChild.data=e:t=n.textContent=e}else if(e==null||o==="boolean"){if(M.context)return t;t=K(n,t,i)}else{if(o==="function")return k(()=>{let r=e();for(;typeof r=="function";)r=r();t=$e(n,r,t,i)}),()=>t;if(Array.isArray(e)){const r=[],u=t&&Array.isArray(t);if(Pe(r,e,t,s))return k(()=>t=$e(n,r,t,i,!0)),()=>t;if(M.context){if(!r.length)return t;for(let c=0;c<r.length;c++)if(r[c].parentNode)return t=r}if(r.length===0){if(t=K(n,t,i),l)return t}else u?t.length===0?Ge(n,r,i):sn(n,t,r):(t&&K(n),Ge(n,r));t=r}else if(e instanceof Node){if(M.context&&e.parentNode)return t=l?[e]:e;if(Array.isArray(t)){if(l)return t=K(n,t,i,e);K(n,t,null,e)}else t==null||t===""||!n.firstChild?n.appendChild(e):n.replaceChild(e,n.firstChild);t=e}}return t}function Pe(n,e,t,i){let s=!1;for(let o=0,l=e.length;o<l;o++){let r=e[o],u=t&&t[o];if(r instanceof Node)n.push(r);else if(!(r==null||r===!0||r===!1))if(Array.isArray(r))s=Pe(n,r,u)||s;else if(typeof r=="function")if(i){for(;typeof r=="function";)r=r();s=Pe(n,Array.isArray(r)?r:[r],Array.isArray(u)?u:[u])||s}else n.push(r),s=!0;else{const c=String(r);u&&u.nodeType===3&&u.data===c?n.push(u):n.push(document.createTextNode(c))}}return s}function Ge(n,e,t=null){for(let i=0,s=e.length;i<s;i++)n.insertBefore(e[i],t)}function K(n,e,t,i){if(t===void 0)return n.textContent="";const s=i||document.createTextNode("");if(e.length){let o=!1;for(let l=e.length-1;l>=0;l--){const r=e[l];if(s!==r){const u=r.parentNode===n;!o&&!l?u?n.replaceChild(s,r):n.insertBefore(s,t):u&&r.remove()}else o=!0}}else n.insertBefore(s,t);return[s]}var ln=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ct={exports:{}};(function(n){(function(e,t){n.exports?n.exports=t():e.log=t()})(ln,function(){var e=function(){},t="undefined",i=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"];function o(h,m){var _=h[m];if(typeof _.bind=="function")return _.bind(h);try{return Function.prototype.bind.call(_,h)}catch{return function(){return Function.prototype.apply.apply(_,[h,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function r(h){return h==="debug"&&(h="log"),typeof console===t?!1:h==="trace"&&i?l:console[h]!==void 0?o(console,h):console.log!==void 0?o(console,"log"):e}function u(h,m){for(var _=0;_<s.length;_++){var f=s[_];this[f]=_<h?e:this.methodFactory(f,h,m)}this.log=this.debug}function c(h,m,_){return function(){typeof console!==t&&(u.call(this,m,_),this[h].apply(this,arguments))}}function a(h,m,_){return r(h)||c.apply(this,arguments)}function g(h,m,_){var f=this,C;m=m??"WARN";var y="loglevel";typeof h=="string"?y+=":"+h:typeof h=="symbol"&&(y=void 0);function R(b){var Q=(s[b]||"silent").toUpperCase();if(!(typeof window===t||!y)){try{window.localStorage[y]=Q;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+Q+";"}catch{}}}function I(){var b;if(!(typeof window===t||!y)){try{b=window.localStorage[y]}catch{}if(typeof b===t)try{var Q=window.document.cookie,de=Q.indexOf(encodeURIComponent(y)+"=");de!==-1&&(b=/^([^;]+)/.exec(Q.slice(de))[1])}catch{}return f.levels[b]===void 0&&(b=void 0),b}}function ue(){if(!(typeof window===t||!y)){try{window.localStorage.removeItem(y);return}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}f.name=h,f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=_||a,f.getLevel=function(){return C},f.setLevel=function(b,Q){if(typeof b=="string"&&f.levels[b.toUpperCase()]!==void 0&&(b=f.levels[b.toUpperCase()]),typeof b=="number"&&b>=0&&b<=f.levels.SILENT){if(C=b,Q!==!1&&R(b),u.call(f,b,h),typeof console===t&&b<f.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+b},f.setDefaultLevel=function(b){m=b,I()||f.setLevel(b,!1)},f.resetLevel=function(){f.setLevel(m,!1),ue()},f.enableAll=function(b){f.setLevel(f.levels.TRACE,b)},f.disableAll=function(b){f.setLevel(f.levels.SILENT,b)};var z=I();z==null&&(z=m),f.setLevel(z,!1)}var d=new g,v={};d.getLogger=function(m){if(typeof m!="symbol"&&typeof m!="string"||m==="")throw new TypeError("You must supply a name when creating a logger.");var _=v[m];return _||(_=v[m]=new g(m,d.getLevel(),d.methodFactory)),_};var x=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=x),d},d.getLoggers=function(){return v},d.default=d,d})})(Ct);const B=Ct.exports,Et="/assets/logo.5abc8dcc.svg",an="_logo_13ybe_1",cn="_spin_13ybe_1",fe={logo:an,spin:cn},un="modulepreload",dn=function(n){return"/"+n},Je={},hn=function(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=dn(o),o in Je)return;Je[o]=!0;const l=o.endsWith(".css"),r=l?'[rel="stylesheet"]':"";if(!!i)for(let a=s.length-1;a>=0;a--){const g=s[a];if(g.href===o&&(!l||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${r}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":un,l||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),l)return new Promise((a,g)=>{c.addEventListener("load",a),c.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};class ${constructor(e,t,i,s,o){this._legacyCanvasSize=$.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),i&&typeof i=="object"?this._onDecode=t:(console.warn(i||s||o?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t=typeof i=="object"?i:{},this._onDecodeError=t.onDecodeError||(typeof i=="function"?i:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||(typeof s=="function"?s:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize=typeof i=="number"?i:typeof s=="number"?s:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let l=!1;if(e.hidden&&(e.hidden=!1,l=!0),document.body.contains(e)||(document.body.appendChild(e),l=!0),i=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(s=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),o=this.$overlay.style,o.position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!s&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let r=window.getComputedStyle(e);r.display==="none"&&(e.style.setProperty("display","block","important"),l=!0),r.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),l=!0),l&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=$.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await $.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput"),i;try{e&&(await t()).every(s=>!s.label)&&(i=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await t()).map((s,o)=>({id:s.deviceId,label:s.label||(o===0?"Default Camera":`Camera ${o+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),$._stopVideoStream(i))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),$._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),$._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?$._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&($._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(i=>setTimeout(i,300)),this._paused?(t(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,i,s,o=!1,l=!1){let r,u=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(r=t.scanRegion,i=t.qrEngine,s=t.canvas,o=t.disallowCanvasResizing||!1,l=t.alsoTryWithoutScanRegion||!1,u=!0):console.warn(t||i||s||o||l?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!i;try{let c,a;[i,c]=await Promise.all([i||$.createQrEngine(),$._loadImage(e)]),[s,a]=$._drawToCanvas(c,r,s,o);let g;if(i instanceof Worker){let d=i;t||$._postWorkerMessageSync(d,"inversionMode","both"),g=await new Promise((v,x)=>{let h,m,_,f=-1;m=y=>{y.data.id===f&&(d.removeEventListener("message",m),d.removeEventListener("error",_),clearTimeout(h),y.data.data!==null?v({data:y.data.data,cornerPoints:$._convertPoints(y.data.cornerPoints,r)}):x($.NO_QR_CODE_FOUND))},_=y=>{d.removeEventListener("message",m),d.removeEventListener("error",_),clearTimeout(h),x("Scanner error: "+(y?y.message||y:"Unknown Error"))},d.addEventListener("message",m),d.addEventListener("error",_),h=setTimeout(()=>_("timeout"),1e4);let C=a.getImageData(0,0,s.width,s.height);f=$._postWorkerMessageSync(d,"decode",C,[C.data.buffer])})}else g=await Promise.race([new Promise((d,v)=>window.setTimeout(()=>v("Scanner error: timeout"),1e4)),(async()=>{try{var[d]=await i.detect(s);if(!d)throw $.NO_QR_CODE_FOUND;return{data:d.rawValue,cornerPoints:$._convertPoints(d.cornerPoints,r)}}catch(v){if(d=v.message||v,/not implemented|service unavailable/.test(d))return $._disableBarcodeDetector=!0,$.scanImage(e,{scanRegion:r,canvas:s,disallowCanvasResizing:o,alsoTryWithoutScanRegion:l});throw`Scanner error: ${d}`}})()]);return u?g:g.data}catch(c){if(!r||!l)throw c;let a=await $.scanImage(e,{qrEngine:i,canvas:s,disallowCanvasResizing:o});return u?a:a.data}finally{t||$._postWorkerMessage(i,"close")}}setGrayscaleWeights(e,t,i,s=!0){$._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:i,useIntegerApproximation:s})}setInversionMode(e){$._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){return e&&console.warn("Specifying a worker path is not required and not supported anymore."),!$._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")?new BarcodeDetector({formats:["qr_code"]}):hn(()=>import("./qr-scanner-worker.min.56d417f3.js"),[]).then(t=>t.createWorker())}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,i=e.videoHeight,s=e.offsetWidth,o=e.offsetHeight,l=e.offsetLeft,r=e.offsetTop,u=window.getComputedStyle(e),c=u.objectFit,a=t/i,g=s/o;switch(c){case"none":var d=t,v=i;break;case"fill":d=s,v=o;break;default:(c==="cover"?a>g:a<g)?(v=o,d=v*a):(d=s,v=d/a),c==="scale-down"&&(d=Math.min(d,t),v=Math.min(v,i))}var[x,h]=u.objectPosition.split(" ").map((_,f)=>{const C=parseFloat(_);return _.endsWith("%")?(f?o-v:s-d)*C/100:C});u=this._scanRegion.width||t,g=this._scanRegion.height||i,c=this._scanRegion.x||0;var m=this._scanRegion.y||0;a=this.$overlay.style,a.width=`${u/t*d}px`,a.height=`${g/i*v}px`,a.top=`${r+h+m/i*v}px`,i=/scaleX\(-1\)/.test(e.style.transform),a.left=`${l+(i?s-x-d:x)+(i?t-c-u:c)/t*d}px`,a.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let i=t.x||0,s=t.y||0,o=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let l of e)l.x=l.x*o+i,l.y=l.y*t+s;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(s=>setTimeout(s,t-e)),this._lastScanTimestamp=Date.now();try{var i=await $.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(s){if(!this._active)return;this._onDecodeError(s)}!$._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=$.createQrEngine()),i?(this._onDecode?this._onDecode(i):this._legacyOnDecode&&this._legacyOnDecode(i.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(({x:s,y:o})=>`${s},${o}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==$.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],i=t.map(s=>Object.assign({},s,{[e]:{exact:this._preferredCamera}}));for(let s of[...i,...t])try{let o=await navigator.mediaDevices.getUserMedia({video:s,audio:!1}),l=this._getFacingMode(o)||(s.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:o,facingMode:l}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,i,s=!1){i=i||document.createElement("canvas");let o=t&&t.x?t.x:0,l=t&&t.y?t.y:0,r=t&&t.width?t.width:e.videoWidth||e.width,u=t&&t.height?t.height:e.videoHeight||e.height;return s||(s=t&&t.downScaledWidth?t.downScaledWidth:r,t=t&&t.downScaledHeight?t.downScaledHeight:u,i.width!==s&&(i.width=s),i.height!==t&&(i.height=t)),t=i.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(e,o,l,r,u,0,0,i.width,i.height),[i,t]}static async _loadImage(e){if(e instanceof Image)return await $._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await $._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((t,i)=>{let s=o=>{e.removeEventListener("load",s),e.removeEventListener("error",s),o instanceof ErrorEvent?i("Image load error"):t()};e.addEventListener("load",s),e.addEventListener("error",s)})}static async _postWorkerMessage(e,t,i,s){return $._postWorkerMessageSync(await e,t,i,s)}static _postWorkerMessageSync(e,t,i,s){if(!(e instanceof Worker))return-1;let o=$._workerMessageId++;return e.postMessage({id:o,type:t,data:i},s),o}}$.DEFAULT_CANVAS_SIZE=400;$.NO_QR_CODE_FOUND="No QR code found";$._disableBarcodeDetector=!1;$._workerMessageId=0;const[fn,gn]=w(!1),[Ie,Ae]=w(!1),[pn,mn]=w({}),[Y,Ue]=w(""),[Le,kt]=w(""),[Lt,vn]=w("");w("");const[W,N]=w(""),[ys,Ze]=w(""),[G,ge]=w(0),[Ot,_n]=w(""),[yn,wn]=w(""),[$n,bn]=w(""),[Sn,xn]=w(""),[be,Cn]=w(""),[Se,En]=w(""),[se,ws]=w(""),[Tt,At]=w([]),[pe,oe]=w(""),[et,xe]=w(!1),[tt,Nt]=w(!1),[nt,it]=w(!1),[kn,Ln]=w(!1),On=S("<button>toggle scanner</button>"),Tn=S('<div class="invoiceform payform"><h3>lightning invoice</h3><p><label>amount:</label> <span class="sats"></span> sats<br><label>memo:</label> <!> <br></p><span class="error"></span><button>pay</button><button>cancel</button></div>'),An=S('<div class="lnurlpform payform"><h3>lnurlp, payment link</h3><label for="amount">Amount:<div class="info"><label>min. amount: </label><label>max. amount: </label><label>info: </label></div></label><input placeholder="100" type="number" class="amount" name="amount"><label for="comment">Comment:<div class="info"><label>max. characters: </label></div></label><textarea placeholder="comment..." id="comment" name="comment"></textarea><br><label for="bookmark1"><input id="bookmark1" name="bookmark" type="checkbox"> bookmark lnurl</label><span class="error"></span><button>pay</button><button>cancel</button></div>'),Nn=S('<div class="lnurlwform payform"><h3>lnurlw, withdraw link</h3><label for="amount">Amount: </label><label>min. amount: </label><label>max. amount: </label><input placeholder="100" type="number" class="amount" name="amount"><label for="bookmark2"><input id="bookmark2" name="bookmark" type="checkbox"> bookmark lnurl</label><span class="error"></span><button>withdraw</button><button>cancel</button></div>'),Rn=S('<section id="pay"><h3>pay invoice</h3><textarea placeholder="paste invoice (lnbc.) or LNURL here..." id="invoice" name="invoice" rows="6"></textarea></section>'),[je,Dn]=w({}),[Be,Pn]=w({}),[In,st]=w(!1),[Mn,ot]=w(!1),[Fn,rt]=w(!1),[U,lt]=w(0),[at,ct]=w(0),[ut,dt]=w(0),[Wn,ht]=w(0),[qn,Hn]=w(""),[Un,jn]=w(0),[Rt,Bn]=w(!1),Vn=n=>{N(""),te.send({type:"pay",data:{bolt11:pe()}})},Qn=n=>{let e=Be(),t=U()*1e3;t>=e.minSendable&&t<=e.maxSendable?(N(""),te.send({type:"pay_lnurlp",data:{callback:e.callback,amount:t,comment:qn()}})):N("ERROR: amount not in range")},Xn=n=>{let e=Be(),t=U()*1e3;t>=e.minWithdrawable&&t<=e.maxWithdrawable?(N(""),te.send({type:"pay_lnurlw",data:{callback:e.callback,amount:U(),k1:e.k1}})):N("ERROR: amount not in range")},Ne=n=>{oe("")};let Re=null;const Yn=n=>{let e=!Rt();Bn(e),e?(Re=new $(document.getElementById("video"),t=>oe(t)),Re.start()):Re.stop()},zn=n=>(je().amount_msat/1e3).toLocaleString(),Kn=n=>je().description,Gn=n=>{let e,t;n.stopPropagation(),n.preventDefault(),e=n.clipboardData||window.clipboardData,t=e.getData("Text"),oe(t)};function Jn(){return ne(()=>{je()&&st(!0)}),ne(()=>{let n=Be();if(n){if(n.tag==="payRequest"){jn(n.commentAllowed);let e=JSON.parse(n.metadata)[0][1];ht(e),ct(n.minSendable/1e3),dt(n.maxSendable/1e3),ot(!0);let t=document.querySelector(".lnurlpform .amount");t&&t.focus()}if(n.tag==="withdrawRequest"){rt(!0),ct(n.minWithdrawable/1e3),dt(n.maxWithdrawable/1e3),ht(n.defaultDescription);let e=document.querySelector(".lnurlwform .amount");e&&e.focus()}}}),ne(()=>{pe()&&te.send({type:"invoice",data:{bolt11:pe()}}),N(""),st(!1),ot(!1),rt(!1)}),(()=>{const n=Rn.cloneNode(!0),e=n.firstChild,t=e.nextSibling;return p(n,E(A,{get when(){return kn()},get children(){return[(()=>{const i=On.cloneNode(!0);return i.$$click=Yn,i})()," ",ie(()=>Rt()?"on":"off")]}}),t),t.addEventListener("paste",Gn),p(n,E(A,{get when(){return In()},get children(){const i=Tn.cloneNode(!0),s=i.firstChild,o=s.nextSibling,l=o.firstChild,r=l.nextSibling,u=r.nextSibling,c=u.nextSibling,a=c.nextSibling,g=a.nextSibling,d=g.nextSibling,v=d.nextSibling;v.nextSibling;const x=o.nextSibling,h=x.nextSibling,m=h.nextSibling;return p(u,zn),p(o,Kn,v),p(x,W),h.$$click=Vn,m.$$click=Ne,i}}),null),p(n,E(A,{get when(){return Mn()},get children(){const i=An.cloneNode(!0),s=i.firstChild,o=s.nextSibling,l=o.firstChild,r=l.nextSibling,u=r.firstChild;u.firstChild;const c=u.nextSibling;c.firstChild;const a=c.nextSibling;a.firstChild;const g=o.nextSibling,d=g.nextSibling,v=d.firstChild,x=v.nextSibling,h=x.firstChild;h.firstChild;const m=d.nextSibling,_=m.nextSibling,f=_.nextSibling,C=f.nextSibling,y=C.nextSibling,R=y.nextSibling;return p(u,at,null),p(c,ut,null),p(a,Wn,null),g.$$keyup=I=>lt(parseInt(I.currentTarget.value)),p(h,Un,null),m.$$keyup=I=>Hn(I.currentTarget.value),p(C,W),y.$$click=Qn,R.$$click=Ne,i}}),null),p(n,E(A,{get when(){return Fn()},get children(){const i=Nn.cloneNode(!0),s=i.firstChild,o=s.nextSibling,l=o.nextSibling;l.firstChild;const r=l.nextSibling;r.firstChild;const u=r.nextSibling,c=u.nextSibling,a=c.nextSibling,g=a.nextSibling,d=g.nextSibling;return p(l,at,null),p(r,ut,null),u.$$keyup=v=>lt(parseInt(v.currentTarget.value)),p(a,W),g.$$click=Xn,d.$$click=Ne,i}}),null),k(()=>n.className=W()?"error":""),k(()=>t.value=pe()),n})()}H(["click","keyup"]);const Zn="0.0.4",Ve="https://lnbits.b1tco1n.org",Dt="api.b1tco1n.org",Pt=`https://${Dt}`,ei=`wss://${Dt}/ws`,Oe=`${Ve}/api/v1/qrcode/`,ti=S("<button>create</button>"),ni=S('<p><img class="qrcode" alt="invoice qrcode svg"></p>'),ii=S("<button>copy invoice</button>"),si=S("<button>cancel</button>"),oi=S('<div class="invoiceform payform"><h3>create invoice</h3><label for="amount">Amount:</label><input placeholder="100" type="number" class="amount" name="amount"><label for="comment">Comment: </label><textarea placeholder="description..." name="description"></textarea><span class="error"></span><button>create</button><button>cancel</button></div>'),ri=S('<section id="create"><h3>create invoice</h3></section>'),[li,ai]=w(0),[ci,ui]=w(0),[ft,Qe]=w(!1),[di,It]=w(!1),[Ce,Mt]=w(""),hi=n=>{N(""),Qe(!1),te.send({type:"create_invoice",data:{amount:li(),description:ci()}})},fi=n=>{Qe(!0)},gt=n=>{Mt(""),Qe(!1),It(!1)},gi=()=>Ce()?Oe+Ce():"#",pi=()=>Te(Ce());function mi(){return ne(()=>{let n=!!Ce();It(n)}),(()=>{const n=ri.cloneNode(!0);return n.firstChild,p(n,E(A,{get when(){return!ft()},get children(){const e=ti.cloneNode(!0);return e.$$click=fi,e}}),null),p(n,E(A,{get when(){return di()},get children(){return[(()=>{const e=ni.cloneNode(!0),t=e.firstChild;return k(()=>F(t,"src",gi())),e})(),(()=>{const e=ii.cloneNode(!0);return e.$$click=pi,e})(),(()=>{const e=si.cloneNode(!0);return e.$$click=gt,e})()]}}),null),p(n,E(A,{get when(){return ft()},get children(){const e=oi.cloneNode(!0),t=e.firstChild,i=t.nextSibling,s=i.nextSibling,o=s.nextSibling,l=o.nextSibling,r=l.nextSibling,u=r.nextSibling,c=u.nextSibling;return s.$$keyup=a=>ai(parseInt(a.currentTarget.value)),l.$$keyup=a=>ui(a.currentTarget.value),p(r,W),u.$$click=hi,c.$$click=gt,e}}),null),k(()=>n.className=W()?"error":""),n})()}H(["click","keyup"]);B.setLevel(3);const Xe=(n,e,t=!0,i=null)=>{let s={credentials:"include"};if(i)if(s.method="POST",t)s.headers={"Content-Type":"application/json"},s.body=JSON.stringify(i);else{let o=new FormData;Object.keys(i).forEach(l=>{o.append(l,i[l])}),s.body=o}fetch(Pt+n,s).then(async o=>{if(o.status===401)throw new Error("unauthorized");if(!o.ok){let r={};try{r=await o.json()}catch{throw new Error("could not parse response json")}let u="";throw Array.isArray(r.detail)?u=r.detail.map(a=>a.loc[1]+": "+a.msg).join(`
`):u=r.detail,new Error(`${u}`)}return await o.json()}).then(e).catch(o=>{B.error(o),N(o.toString())})},vi=n=>{fetch(Pt).then(async e=>{const i=(await e.json()).status==="OK";n(i)}).catch(async e=>{n(!1)})},me=(n,e,t)=>{t||(t="/assets/favicon.ico"),"Notification"in window?Notification.permission==="granted"?new Notification(n,{body:e,icon:t}):Notification.permission!=="denied"&&Notification.requestPermission().then(i=>{i==="granted"&&new Notification(n,{body:e,icon:t})}):alert("This browser does not support desktop notification")},Te=n=>{"clipboard"in navigator&&navigator.clipboard.writeText(n).then(function(){},function(e){me("Clipboard","Error copying to clipboard")})},P={user:"user",pay:"pay",invoice:"invoice",create_invoice:"create_invoice",payment_received:"payment_received",error:"error",lnurl:"lnurl",lnurl_success:"lnurl_success",ping:"ping",pong:"pong",hello:"hello"};class _i{constructor(){this.ws=new WebSocket(ei),this.ws.onerror=this.onerror,this.ws.onopen=this.onopen,this.ws.onmessage=this.onmessage,this.ws.onclose=this.onclose}send(e){this.ws.send(JSON.stringify(e))}onerror(e){Ae(!1),xe(!0)}onclose(e){Ae(!1),xe(!0)}onopen(e){this.send(JSON.stringify({type:P.user}))}onmessage(e){let t=JSON.parse(e.data);if(B.debug(t),t.type==P.user&&(Ae(!0),mn(t.data)),t.type==P.payment_received){let i=t.data.amount/1e3,s=G()+i;me("payment received!",`${i} sats
payment_hash: `+t.data.payment_hash),ge(s);let o=Tt();o.unshift(t.data),At(o)}if(t.type==P.pay){let i="invoice paid";Ze(i),ge(G()-U()),me(i,`${parseInt(U())} sats
payment_hash: `+t.data.payment_hash),oe("")}if(t.type==P.lnurl_success){let i=0;t.data.message=="withdrawn"?i=G()+parseInt(U()):i=G()-parseInt(U()),ge(i),Ze(t.data.message),me(t.data.message,`${parseInt(U())} sats
payment_hash: `+t.data.payment_hash),oe("")}t.type==P.invoice&&Dn(t.data),t.type==P.create_invoice&&Mt(t.data.invoice),t.type==P.error&&(N(t.message),B.error(t.type,t.message)),t.type==P.lnurl&&Pn(t.data),t&&t.type==P.ping&&this.send({type:P.pong}),t&&t.type==P.pong&&B.debug("received pong!!!")}}const yi=S("<h2>LNAuth Login</h2>"),wi=S('<p><img class="qrcode" alt=""></p>'),$i=S("<p></p>"),bi=S("<p><button>copy</button></p>"),Si=S('<div id="login"><h2>Login</h2><form method="POST"><input type="text" name="username" placeholder="username..."><input type="password" name="password" placeholder="password..."><input type="submit" value="login">&nbsp;or&nbsp;<span class="btn">signup</span></form></div>'),xi=()=>Te(se()),Ci=()=>se()?Oe+se():"#",Ei=n=>{Nt(!0),xe(!1)},ki=n=>(n.preventDefault(),N(""),Xe("/login",e=>{window.location="/"},!1,{username:Y(),password:Le()}),!1);function Li(){return(()=>{const n=Si.cloneNode(!0),e=n.firstChild,t=e.nextSibling,i=t.firstChild,s=i.nextSibling,o=s.nextSibling,l=o.nextSibling,r=l.nextSibling;return t.addEventListener("submit",ki),i.addEventListener("change",u=>Ue(u.currentTarget.value)),s.addEventListener("change",u=>kt(u.currentTarget.value)),r.$$click=Ei,p(n,E(A,{get when(){return se()},get children(){return[yi.cloneNode(!0),(()=>{const u=wi.cloneNode(!0),c=u.firstChild;return k(()=>F(c,"src",Ci())),u})(),(()=>{const u=$i.cloneNode(!0);return p(u,se),u})(),(()=>{const u=bi.cloneNode(!0),c=u.firstChild;return c.$$click=xi,u})()]}}),null),k(()=>t.className=W()?"error":""),k(()=>i.value=Y()),k(()=>s.value=Le()),n})()}H(["click"]);const Oi=S('<div id="signup"><h2>Sign up</h2><form name="signup" method="POST"><input type="text" name="username" placeholder="username..."><input type="password" name="password" placeholder="password..."><input type="password" name="password-repeat" placeholder="password repeat..."><input type="submit" value="signup">&nbsp;or&nbsp;<span class="btn">login</span></form></div>'),Ti=n=>{Nt(!1),xe(!0)},Ai=n=>(n.preventDefault(),N(""),Xe("/signup",e=>{window.location="/"},!0,{username:Y(),password:Le(),password_repeat:Lt()}),!1);function Ni(){return(()=>{const n=Oi.cloneNode(!0),e=n.firstChild,t=e.nextSibling,i=t.firstChild,s=i.nextSibling,o=s.nextSibling,l=o.nextSibling,r=l.nextSibling,u=r.nextSibling;return t.addEventListener("submit",Ai),i.addEventListener("change",c=>Ue(c.currentTarget.value)),s.addEventListener("change",c=>kt(c.currentTarget.value)),o.addEventListener("change",c=>vn(c.currentTarget.value)),u.$$click=Ti,k(()=>t.className=W()?"error":""),k(()=>i.value=Y()),k(()=>s.value=Le()),k(()=>o.value=Lt()),n})()}H(["click"]);const Ri=S('<section id="settings"><button>lnbits</button><button>settings</button><div id="settings-content"><h2>user info</h2><b>usr: </b> <br><b>wallet_id: </b> <br><b>api_key: </b> <br><button>hide settings</button></div></section>'),Di=()=>window.open(Ve+"/wallet?usr="+Ot(),"_blank");function Pi(){return(()=>{const n=Ri.cloneNode(!0),e=n.firstChild,t=e.nextSibling,i=t.nextSibling,s=i.firstChild,o=s.nextSibling,l=o.nextSibling,r=l.nextSibling,u=r.nextSibling,c=u.nextSibling,a=c.nextSibling,g=a.nextSibling,d=g.nextSibling,v=d.nextSibling,x=v.nextSibling;return e.$$click=Di,t.$$click=h=>it(!0),p(i,Ot,r),p(i,yn,a),p(i,$n,v),x.$$click=h=>it(!1),k(h=>{const m=nt()===!0?"hidden":"",_=nt()===!1?"hidden":"";return m!==h._v$&&j(t,h._v$=m),_!==h._v$2&&j(i,h._v$2=_),h},{_v$:void 0,_v$2:void 0}),n})()}H(["click"]);const Ii=S("<button>logout</button>"),Mi=()=>(Xe("/logout",n=>{window.location="/"},!1),!1);function Fi(){return(()=>{const n=Ii.cloneNode(!0);return n.$$click=Mi,n})()}H(["click"]);const Wi=S('<section id="paylinks"><div id="paylink" class="paylink"><h3>receive</h3><p>with this link you can receive sats.</p><p><img class="qrcode" alt="lnurlp qr"></p><p></p><p><button>Copy lnurlp</button></p></div><div id="withdrawlink" class="paylink"><h3>withdraw</h3><p>with this link you can withdraw sats. DO NOT SHARE</p><p><img class="qrcode" alt="lnurlp qr"></p><p></p><p><button>Copy withdrawlink</button></p></div></section>'),qi=()=>be()?Oe+be():"#",Hi=()=>Te(be()),Ui=()=>Se()?Oe+Se():"#",ji=()=>Te(Se());function Bi(){return(()=>{const n=Wi.cloneNode(!0),e=n.firstChild,t=e.firstChild,i=t.nextSibling,s=i.nextSibling,o=s.firstChild,l=s.nextSibling,r=l.nextSibling,u=r.firstChild,c=e.nextSibling,a=c.firstChild,g=a.nextSibling,d=g.nextSibling,v=d.firstChild,x=d.nextSibling,h=x.nextSibling,m=h.firstChild;return p(l,be),u.$$click=Hi,p(x,Se),m.$$click=ji,k(_=>{const f=qi(),C=Ui();return f!==_._v$&&F(o,"src",_._v$=f),C!==_._v$2&&F(v,"src",_._v$2=C),_},{_v$:void 0,_v$2:void 0}),n})()}H(["click"]);const Vi=S('<section id="tpos"><button>pos</button></section>'),Qi=()=>window.open(Ve+"/tpos/"+Sn(),"_blank");function Xi(){return(()=>{const n=Vi.cloneNode(!0),e=n.firstChild;return e.$$click=Qi,n})()}H(["click"]);const Yi=S('<section id="dashboard"><section id="user-info"><img alt="logo"><div class="user-info-content"><h2>welcome <!>!</h2><p>Email Address: <a></a><br>Lightning Address: <a></a><br>Website: <a></a></p></div></section><nav></nav><section id="balance-section"><h1 id="balance"><span id="sats"></span> sats</h1></section></section>'),Ee=()=>Y()+"@b1tco1n.org",zi=()=>"lightning:"+Ee(),Ki=()=>"mailto:"+Ee(),Ft=()=>Y()+".b1tco1n.org",Gi=()=>"https://"+Ft(),Ji=()=>G()?G().toLocaleString():0;function Zi(){return ne(()=>{let n=pn();Ue(n.username),_n(n.usr),wn(n.wallet_id),bn(n.api_key),Cn(n.lnurlp),En(n.lnurlw),xn(n.tpos),ge(n.balance),At(n.payments)}),(()=>{const n=Yi.cloneNode(!0),e=n.firstChild,t=e.firstChild,i=t.nextSibling,s=i.firstChild,o=s.firstChild,l=o.nextSibling;l.nextSibling;const r=s.nextSibling,u=r.firstChild,c=u.nextSibling,a=c.nextSibling,g=a.nextSibling,d=g.nextSibling,v=d.nextSibling,x=v.nextSibling,h=x.nextSibling,m=e.nextSibling,_=m.nextSibling,f=_.firstChild,C=f.firstChild;return F(t,"src",Et),p(s,Y,l),p(c,Ee),p(d,Ee),p(h,Ft),p(m,E(Xi,{}),null),p(m,E(Pi,{}),null),p(m,E(Fi,{}),null),p(C,Ji),p(n,E(Jn,{}),null),p(n,E(mi,{}),null),p(n,E(Bi,{}),null),k(y=>{const R=Ie()===!0?"active":"",I=fe.logo,ue=Ki(),z=zi(),b=Gi();return R!==y._v$&&j(n,y._v$=R),I!==y._v$2&&j(t,y._v$2=I),ue!==y._v$3&&F(c,"href",y._v$3=ue),z!==y._v$4&&F(d,"href",y._v$4=z),b!==y._v$5&&F(h,"href",y._v$5=b),y},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),n})()}const es=S('<section id="payments"><h3>payments</h3><ul id="payment-list"></ul></section>'),ts=S("<div>no payments</div>"),ns=S('<li><span class="amount"> sats</span><span class="date"></span><span class="memo"></span></li>'),is=n=>(n/1e3).toLocaleString(),ss=n=>{let e=n.pending?"pending ":"";return e+=n.amount>0?"receive":"sent",e},os=n=>new Date(n*1e3).toLocaleString();function rs(){return(()=>{const n=es.cloneNode(!0),e=n.firstChild,t=e.nextSibling;return p(t,E(nn,{get each(){return Tt()},get fallback(){return ts.cloneNode(!0)},children:(i,s)=>(()=>{const o=ns.cloneNode(!0),l=o.firstChild,r=l.firstChild,u=l.nextSibling,c=u.nextSibling;return p(l,()=>is(i.amount),r),p(o,()=>i.pending?"pending ":"",u),p(u,()=>os(i.time)),p(c,()=>i.memo),k(a=>{const g=ss(i),d=s();return g!==a._v$&&j(o,a._v$=g),d!==a._v$2&&F(o,"key",a._v$2=d),a},{_v$:void 0,_v$2:void 0}),o})()})),n})()}const ls=S('<span class="error"></span>'),as=S('<img alt="logo">'),cs=S('<div class="ring">Loading<span></span></div>'),us=S('<div><section id="main"></section><footer><button>rainbow</button>- made with \u2764\uFE0F by <a target="_blank" href="https://www.twitter.com/dnilabs">dni</a><p>b1tco1n.org, wallet based on <a target="_blank" href="https://lnbits.com/">lnbits</a>, version: </p></footer></div>');let te=null;const ds=()=>document.body.classList.toggle("rainbow"),hs=()=>("serviceWorker"in navigator&&navigator.serviceWorker.register("./service-worker.js",{scope:"./"}).then(n=>{B.info(`Registration succeeded. Scope is ${n.scope}`)}),navigator.onLine?vi(n=>{n===!0?(gn(!0),N(""),te=new _i):N("API is offline.")}):N("you are offline."),$.hasCamera().then(Ln),(()=>{const n=us.cloneNode(!0),e=n.firstChild,t=e.nextSibling,i=t.firstChild,s=i.nextSibling,o=s.nextSibling,l=o.nextSibling;return l.firstChild.nextSibling.nextSibling,p(e,E(A,{get when(){return W()},get children(){const c=ls.cloneNode(!0);return p(c,W),c}}),null),p(e,E(A,{get when(){return Ie()},get children(){return[E(Zi,{}),E(rs,{})]}}),null),p(e,E(A,{get when(){return!Ie()},get children(){return[(()=>{const c=as.cloneNode(!0);return F(c,"src",Et),k(()=>j(c,fe.logo)),c})(),E(A,{get when(){return fn()},get children(){return[E(A,{get when(){return ie(()=>!et())()&&!tt()},get children(){return cs.cloneNode(!0)}}),E(A,{get when(){return et()},get children(){return E(Li,{})}}),E(A,{get when(){return tt()},get children(){return E(Ni,{})}})]}})]}}),null),i.$$click=ds,p(l,Zn,null),k(c=>{const a=fe.App,g=fe.header;return a!==c._v$&&j(n,c._v$=a),g!==c._v$2&&j(e,c._v$2=g),c},{_v$:void 0,_v$2:void 0}),n})());H(["click"]);var Me=document.querySelector("canvas"),D=Me.getContext("2d"),Wt=0,De=.005,Ye=.01,J,ce,Z,ee,ke=400,Fe=4,fs=ke/Fe,pt=ke*.25,mt=7;const gs=function(){vt(),qt(),window.addEventListener("resize",vt),window.addEventListener("mousedown",vs),document.addEventListener("touchstart",_s)};function vt(){J=Me.width=window.innerWidth,ce=Me.height=window.innerHeight}function qt(){Wt+=De,De+=(Ye-De)*.01,ps(),ms(),requestAnimationFrame(qt)}function ps(){D.clearRect(0,0,J,ce)}function ms(){var n,e,t=J/2,i=ce/2;D.globalCompositeOperation="lighter",D.strokeStyle="#000",D.lineWidth=2,D.beginPath();for(var s=fs;s>0;s--){var o=s*Fe+Wt%Fe,l=Math.sin(o/mt)*Math.PI,r=Math.cos(o/mt)*Math.PI;n=l*o,e=r*o*.35;var u=1-Math.min(o,pt)/pt;e-=Math.pow(u,2)*200,e+=200*o/ke,e+=n/t*J*.1,D.globalAlpha=1-o/ke,D.lineTo(t+n,i+e),D.stroke(),D.beginPath(),D.moveTo(t+n,i+e)}D.lineTo(t,i-200),D.lineTo(t,0),D.stroke()}function vs(n){Z=n.clientX,ee=n.clientY,document.addEventListener("mousemove",Ht),document.addEventListener("mouseup",Ut)}function Ht(n){var e=(n.clientX-Z)/1e3,t=(n.clientY-ee)/1e3;n.clientY<ce/2&&(e*=-1),n.clientX>J/2&&(t*=-1),Ye=e+t,Z=n.clientX,ee=n.clientY}function Ut(n){document.removeEventListener("mousemove",Ht),document.removeEventListener("mouseup",Ut)}function _s(n){n.preventDefault(),Z=n.touches[0].clientX,ee=n.touches[0].clientY,document.addEventListener("touchmove",jt),document.addEventListener("touchend",Bt)}function jt(n){var e=(n.touches[0].clientX-Z)/1e3,t=(n.touches[0].clientY-ee)/1e3;n.touches[0].clientY<ce/2&&(e*=-1),n.touches[0].clientX>J/2&&(t*=-1),Ye=e+t,Z=n.touches[0].clientX,ee=n.touches[0].clientY}function Bt(n){document.removeEventListener("touchmove",jt),document.removeEventListener("touchend",Bt)}B.setLevel("info");B.info("debugging is disabled");gs();on(()=>E(hs,{}),document.getElementById("root"));
