(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const M={};function Bt(n){M.context=n}const Vt=(n,e)=>n===e,Qt=Symbol("solid-track"),me={equals:Vt};let vt=$t;const V=1,ve=2,_t={owned:null,cleanups:null,context:null,owner:null};var O=null;let X=null,L=null,T=null,q=null,Ie=0;function ue(n,e){const t=L,i=O,s=n.length===0,o=s?_t:{owned:null,cleanups:null,context:null,owner:e||i},l=s?n:()=>n(()=>se(()=>Fe(o)));O=o,L=null;try{return re(l,!0)}finally{L=t,O=i}}function w(n,e){e=e?Object.assign({},me,e):me;const t={value:n,observers:null,observerSlots:null,comparator:e.equals||void 0},i=s=>(typeof s=="function"&&(s=s(t.value)),wt(t,s));return[yt.bind(t),i]}function k(n,e,t){const i=Me(n,e,!1,V);oe(i)}function te(n,e,t){vt=Kt;const i=Me(n,e,!1,V);i.user=!0,q?q.push(i):oe(i)}function ne(n,e,t){t=t?Object.assign({},me,t):me;const i=Me(n,e,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=t.equals||void 0,oe(i),yt.bind(i)}function se(n){let e,t=L;return L=null,e=n(),L=t,e}function Xt(n){return O===null||(O.cleanups===null?O.cleanups=[n]:O.cleanups.push(n)),n}function yt(){const n=X;if(this.sources&&(this.state||n))if(this.state===V||n)oe(this);else{const e=T;T=null,re(()=>ye(this),!1),T=e}if(L){const e=this.observers?this.observers.length:0;L.sources?(L.sources.push(this),L.sourceSlots.push(e)):(L.sources=[this],L.sourceSlots=[e]),this.observers?(this.observers.push(L),this.observerSlots.push(L.sources.length-1)):(this.observers=[L],this.observerSlots=[L.sources.length-1])}return this.value}function wt(n,e,t){let i=n.value;return(!n.comparator||!n.comparator(i,e))&&(n.value=e,n.observers&&n.observers.length&&re(()=>{for(let s=0;s<n.observers.length;s+=1){const o=n.observers[s],l=X&&X.running;l&&X.disposed.has(o),(l&&!o.tState||!l&&!o.state)&&(o.pure?T.push(o):q.push(o),o.observers&&bt(o)),l||(o.state=V)}if(T.length>1e6)throw T=[],new Error},!1)),e}function oe(n){if(!n.fn)return;Fe(n);const e=O,t=L,i=Ie;L=O=n,Yt(n,n.value,i),L=t,O=e}function Yt(n,e,t){let i;try{i=n.fn(e)}catch(s){n.pure&&(n.state=V),St(s)}(!n.updatedAt||n.updatedAt<=t)&&(n.updatedAt!=null&&"observers"in n?wt(n,i):n.value=i,n.updatedAt=t)}function Me(n,e,t,i=V,s){const o={fn:n,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:O,context:null,pure:t};return O===null||O!==_t&&(O.owned?O.owned.push(o):O.owned=[o]),o}function _e(n){const e=X;if(n.state===0||e)return;if(n.state===ve||e)return ye(n);if(n.suspense&&se(n.suspense.inFallback))return n.suspense.effects.push(n);const t=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<Ie);)(n.state||e)&&t.push(n);for(let i=t.length-1;i>=0;i--)if(n=t[i],n.state===V||e)oe(n);else if(n.state===ve||e){const s=T;T=null,re(()=>ye(n,t[0]),!1),T=s}}function re(n,e){if(T)return n();let t=!1;e||(T=[]),q?t=!0:q=[],Ie++;try{const i=n();return zt(t),i}catch(i){T||(q=null),St(i)}}function zt(n){if(T&&($t(T),T=null),n)return;const e=q;q=null,e.length&&re(()=>vt(e),!1)}function $t(n){for(let e=0;e<n.length;e++)_e(n[e])}function Kt(n){let e,t=0;for(e=0;e<n.length;e++){const i=n[e];i.user?n[t++]=i:_e(i)}for(M.context&&Bt(),e=0;e<t;e++)_e(n[e])}function ye(n,e){const t=X;n.state=0;for(let i=0;i<n.sources.length;i+=1){const s=n.sources[i];s.sources&&(s.state===V||t?s!==e&&_e(s):(s.state===ve||t)&&ye(s,e))}}function bt(n){const e=X;for(let t=0;t<n.observers.length;t+=1){const i=n.observers[t];(!i.state||e)&&(i.state=ve,i.pure?T.push(i):q.push(i),i.observers&&bt(i))}}function Fe(n){let e;if(n.sources)for(;n.sources.length;){const t=n.sources.pop(),i=n.sourceSlots.pop(),s=t.observers;if(s&&s.length){const o=s.pop(),l=t.observerSlots.pop();i<s.length&&(o.sourceSlots[l]=i,s[i]=o,t.observerSlots[i]=l)}}if(n.owned){for(e=0;e<n.owned.length;e++)Fe(n.owned[e]);n.owned=null}if(n.cleanups){for(e=0;e<n.cleanups.length;e++)n.cleanups[e]();n.cleanups=null}n.state=0,n.context=null}function Gt(n){return n instanceof Error||typeof n=="string"?n:new Error("Unknown error")}function St(n){throw n=Gt(n),n}const Jt=Symbol("fallback");function Ye(n){for(let e=0;e<n.length;e++)n[e]()}function Zt(n,e,t={}){let i=[],s=[],o=[],l=0,r=e.length>1?[]:null;return Xt(()=>Ye(o)),()=>{let d=n()||[],u,a;return d[Qt],se(()=>{let c=d.length,v,S,h,p,_,f,x,y,A;if(c===0)l!==0&&(Ye(o),o=[],i=[],s=[],l=0,r&&(r=[])),t.fallback&&(i=[Jt],s[0]=ue(P=>(o[0]=P,t.fallback())),l=1);else if(l===0){for(s=new Array(c),a=0;a<c;a++)i[a]=d[a],s[a]=ue(g);l=c}else{for(h=new Array(c),p=new Array(c),r&&(_=new Array(c)),f=0,x=Math.min(l,c);f<x&&i[f]===d[f];f++);for(x=l-1,y=c-1;x>=f&&y>=f&&i[x]===d[y];x--,y--)h[y]=s[x],p[y]=o[x],r&&(_[y]=r[x]);for(v=new Map,S=new Array(y+1),a=y;a>=f;a--)A=d[a],u=v.get(A),S[a]=u===void 0?-1:u,v.set(A,a);for(u=f;u<=x;u++)A=i[u],a=v.get(A),a!==void 0&&a!==-1?(h[a]=s[u],p[a]=o[u],r&&(_[a]=r[u]),a=S[a],v.set(A,a)):o[u]();for(a=f;a<c;a++)a in h?(s[a]=h[a],o[a]=p[a],r&&(r[a]=_[a],r[a](a))):s[a]=ue(g);s=s.slice(0,l=c),i=d.slice(0)}return s});function g(c){if(o[a]=c,r){const[v,S]=w(a);return r[a]=S,e(d[a],v)}return e(d[a])}}}function C(n,e){return se(()=>n(e||{}))}function en(n){const e="fallback"in n&&{fallback:()=>n.fallback};return ne(Zt(()=>n.each,n.children,e||void 0))}function D(n){let e=!1;const t=n.keyed,i=ne(()=>n.when,void 0,{equals:(s,o)=>e?s===o:!s==!o});return ne(()=>{const s=i();if(s){const o=n.children,l=typeof o=="function"&&o.length>0;return e=t||l,l?se(()=>o(s)):o}return n.fallback})}function tn(n,e,t){let i=t.length,s=e.length,o=i,l=0,r=0,d=e[s-1].nextSibling,u=null;for(;l<s||r<o;){if(e[l]===t[r]){l++,r++;continue}for(;e[s-1]===t[o-1];)s--,o--;if(s===l){const a=o<i?r?t[r-1].nextSibling:t[o-r]:d;for(;r<o;)n.insertBefore(t[r++],a)}else if(o===r)for(;l<s;)(!u||!u.has(e[l]))&&e[l].remove(),l++;else if(e[l]===t[o-1]&&t[r]===e[s-1]){const a=e[--s].nextSibling;n.insertBefore(t[r++],e[l++].nextSibling),n.insertBefore(t[--o],a),e[s]=t[o]}else{if(!u){u=new Map;let g=r;for(;g<o;)u.set(t[g],g++)}const a=u.get(e[l]);if(a!=null)if(r<a&&a<o){let g=l,c=1,v;for(;++g<s&&g<o&&!((v=u.get(e[g]))==null||v!==a+c);)c++;if(c>a-r){const S=e[l];for(;r<a;)n.insertBefore(t[r++],S)}else n.replaceChild(t[r++],e[l++])}else l++;else e[l++].remove()}}}const ze="_$DX_DELEGATE";function nn(n,e,t,i={}){let s;return ue(o=>{s=o,e===document?n():m(e,n(),e.firstChild?null:void 0,t)},i.owner),()=>{s(),e.textContent=""}}function E(n,e,t){const i=document.createElement("template");i.innerHTML=n;let s=i.content.firstChild;return t&&(s=s.firstChild),s}function H(n,e=window.document){const t=e[ze]||(e[ze]=new Set);for(let i=0,s=n.length;i<s;i++){const o=n[i];t.has(o)||(t.add(o),e.addEventListener(o,sn))}}function W(n,e,t){t==null?n.removeAttribute(e):n.setAttribute(e,t)}function j(n,e){e==null?n.removeAttribute("class"):n.className=e}function m(n,e,t,i){if(t!==void 0&&!i&&(i=[]),typeof e!="function")return we(n,e,i,t);k(s=>we(n,e(),s,t),i)}function sn(n){const e=`$$${n.type}`;let t=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==t&&Object.defineProperty(n,"target",{configurable:!0,value:t}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return t||document}}),M.registry&&!M.done&&(M.done=!0,document.querySelectorAll("[id^=pl-]").forEach(i=>i.remove()));t!==null;){const i=t[e];if(i&&!t.disabled){const s=t[`${e}Data`];if(s!==void 0?i.call(t,s,n):i.call(t,n),n.cancelBubble)return}t=t.host&&t.host!==t&&t.host instanceof Node?t.host:t.parentNode}}function we(n,e,t,i,s){for(M.context&&!t&&(t=[...n.childNodes]);typeof t=="function";)t=t();if(e===t)return t;const o=typeof e,l=i!==void 0;if(n=l&&t[0]&&t[0].parentNode||n,o==="string"||o==="number"){if(M.context)return t;if(o==="number"&&(e=e.toString()),l){let r=t[0];r&&r.nodeType===3?r.data=e:r=document.createTextNode(e),t=K(n,t,i,r)}else t!==""&&typeof t=="string"?t=n.firstChild.data=e:t=n.textContent=e}else if(e==null||o==="boolean"){if(M.context)return t;t=K(n,t,i)}else{if(o==="function")return k(()=>{let r=e();for(;typeof r=="function";)r=r();t=we(n,r,t,i)}),()=>t;if(Array.isArray(e)){const r=[],d=t&&Array.isArray(t);if(Re(r,e,t,s))return k(()=>t=we(n,r,t,i,!0)),()=>t;if(M.context){if(!r.length)return t;for(let u=0;u<r.length;u++)if(r[u].parentNode)return t=r}if(r.length===0){if(t=K(n,t,i),l)return t}else d?t.length===0?Ke(n,r,i):tn(n,t,r):(t&&K(n),Ke(n,r));t=r}else if(e instanceof Node){if(M.context&&e.parentNode)return t=l?[e]:e;if(Array.isArray(t)){if(l)return t=K(n,t,i,e);K(n,t,null,e)}else t==null||t===""||!n.firstChild?n.appendChild(e):n.replaceChild(e,n.firstChild);t=e}}return t}function Re(n,e,t,i){let s=!1;for(let o=0,l=e.length;o<l;o++){let r=e[o],d=t&&t[o];if(r instanceof Node)n.push(r);else if(!(r==null||r===!0||r===!1))if(Array.isArray(r))s=Re(n,r,d)||s;else if(typeof r=="function")if(i){for(;typeof r=="function";)r=r();s=Re(n,Array.isArray(r)?r:[r],Array.isArray(d)?d:[d])||s}else n.push(r),s=!0;else{const u=String(r);d&&d.nodeType===3&&d.data===u?n.push(d):n.push(document.createTextNode(u))}}return s}function Ke(n,e,t=null){for(let i=0,s=e.length;i<s;i++)n.insertBefore(e[i],t)}function K(n,e,t,i){if(t===void 0)return n.textContent="";const s=i||document.createTextNode("");if(e.length){let o=!1;for(let l=e.length-1;l>=0;l--){const r=e[l];if(s!==r){const d=r.parentNode===n;!o&&!l?d?n.replaceChild(s,r):n.insertBefore(s,t):d&&r.remove()}else o=!0}}else n.insertBefore(s,t);return[s]}var on=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xt={exports:{}};(function(n){(function(e,t){n.exports?n.exports=t():e.log=t()})(on,function(){var e=function(){},t="undefined",i=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"];function o(h,p){var _=h[p];if(typeof _.bind=="function")return _.bind(h);try{return Function.prototype.bind.call(_,h)}catch{return function(){return Function.prototype.apply.apply(_,[h,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function r(h){return h==="debug"&&(h="log"),typeof console===t?!1:h==="trace"&&i?l:console[h]!==void 0?o(console,h):console.log!==void 0?o(console,"log"):e}function d(h,p){for(var _=0;_<s.length;_++){var f=s[_];this[f]=_<h?e:this.methodFactory(f,h,p)}this.log=this.debug}function u(h,p,_){return function(){typeof console!==t&&(d.call(this,p,_),this[h].apply(this,arguments))}}function a(h,p,_){return r(h)||u.apply(this,arguments)}function g(h,p,_){var f=this,x;p=p??"WARN";var y="loglevel";typeof h=="string"?y+=":"+h:typeof h=="symbol"&&(y=void 0);function A(b){var Q=(s[b]||"silent").toUpperCase();if(!(typeof window===t||!y)){try{window.localStorage[y]=Q;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+Q+";"}catch{}}}function P(){var b;if(!(typeof window===t||!y)){try{b=window.localStorage[y]}catch{}if(typeof b===t)try{var Q=window.document.cookie,de=Q.indexOf(encodeURIComponent(y)+"=");de!==-1&&(b=/^([^;]+)/.exec(Q.slice(de))[1])}catch{}return f.levels[b]===void 0&&(b=void 0),b}}function ce(){if(!(typeof window===t||!y)){try{window.localStorage.removeItem(y);return}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}f.name=h,f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=_||a,f.getLevel=function(){return x},f.setLevel=function(b,Q){if(typeof b=="string"&&f.levels[b.toUpperCase()]!==void 0&&(b=f.levels[b.toUpperCase()]),typeof b=="number"&&b>=0&&b<=f.levels.SILENT){if(x=b,Q!==!1&&A(b),d.call(f,b,h),typeof console===t&&b<f.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+b},f.setDefaultLevel=function(b){p=b,P()||f.setLevel(b,!1)},f.resetLevel=function(){f.setLevel(p,!1),ce()},f.enableAll=function(b){f.setLevel(f.levels.TRACE,b)},f.disableAll=function(b){f.setLevel(f.levels.SILENT,b)};var z=P();z==null&&(z=p),f.setLevel(z,!1)}var c=new g,v={};c.getLogger=function(p){if(typeof p!="symbol"&&typeof p!="string"||p==="")throw new TypeError("You must supply a name when creating a logger.");var _=v[p];return _||(_=v[p]=new g(p,c.getLevel(),c.methodFactory)),_};var S=typeof window!==t?window.log:void 0;return c.noConflict=function(){return typeof window!==t&&window.log===c&&(window.log=S),c},c.getLoggers=function(){return v},c.default=c,c})})(xt);const B=xt.exports,Ct="/assets/logo.5abc8dcc.svg",rn="_logo_13ybe_1",ln="_spin_13ybe_1",he={logo:rn,spin:ln},an="modulepreload",cn=function(n){return"/"+n},Ge={},dn=function(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=cn(o),o in Ge)return;Ge[o]=!0;const l=o.endsWith(".css"),r=l?'[rel="stylesheet"]':"";if(!!i)for(let a=s.length-1;a>=0;a--){const g=s[a];if(g.href===o&&(!l||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${r}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":an,l||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),l)return new Promise((a,g)=>{u.addEventListener("load",a),u.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};class ${constructor(e,t,i,s,o){this._legacyCanvasSize=$.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),i&&typeof i=="object"?this._onDecode=t:(console.warn(i||s||o?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t=typeof i=="object"?i:{},this._onDecodeError=t.onDecodeError||(typeof i=="function"?i:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||(typeof s=="function"?s:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize=typeof i=="number"?i:typeof s=="number"?s:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let l=!1;if(e.hidden&&(e.hidden=!1,l=!0),document.body.contains(e)||(document.body.appendChild(e),l=!0),i=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(s=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),o=this.$overlay.style,o.position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!s&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let r=window.getComputedStyle(e);r.display==="none"&&(e.style.setProperty("display","block","important"),l=!0),r.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),l=!0),l&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=$.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await $.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput"),i;try{e&&(await t()).every(s=>!s.label)&&(i=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await t()).map((s,o)=>({id:s.deviceId,label:s.label||(o===0?"Default Camera":`Camera ${o+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),$._stopVideoStream(i))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),$._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),$._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?$._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&($._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(i=>setTimeout(i,300)),this._paused?(t(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,i,s,o=!1,l=!1){let r,d=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(r=t.scanRegion,i=t.qrEngine,s=t.canvas,o=t.disallowCanvasResizing||!1,l=t.alsoTryWithoutScanRegion||!1,d=!0):console.warn(t||i||s||o||l?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!i;try{let u,a;[i,u]=await Promise.all([i||$.createQrEngine(),$._loadImage(e)]),[s,a]=$._drawToCanvas(u,r,s,o);let g;if(i instanceof Worker){let c=i;t||$._postWorkerMessageSync(c,"inversionMode","both"),g=await new Promise((v,S)=>{let h,p,_,f=-1;p=y=>{y.data.id===f&&(c.removeEventListener("message",p),c.removeEventListener("error",_),clearTimeout(h),y.data.data!==null?v({data:y.data.data,cornerPoints:$._convertPoints(y.data.cornerPoints,r)}):S($.NO_QR_CODE_FOUND))},_=y=>{c.removeEventListener("message",p),c.removeEventListener("error",_),clearTimeout(h),S("Scanner error: "+(y?y.message||y:"Unknown Error"))},c.addEventListener("message",p),c.addEventListener("error",_),h=setTimeout(()=>_("timeout"),1e4);let x=a.getImageData(0,0,s.width,s.height);f=$._postWorkerMessageSync(c,"decode",x,[x.data.buffer])})}else g=await Promise.race([new Promise((c,v)=>window.setTimeout(()=>v("Scanner error: timeout"),1e4)),(async()=>{try{var[c]=await i.detect(s);if(!c)throw $.NO_QR_CODE_FOUND;return{data:c.rawValue,cornerPoints:$._convertPoints(c.cornerPoints,r)}}catch(v){if(c=v.message||v,/not implemented|service unavailable/.test(c))return $._disableBarcodeDetector=!0,$.scanImage(e,{scanRegion:r,canvas:s,disallowCanvasResizing:o,alsoTryWithoutScanRegion:l});throw`Scanner error: ${c}`}})()]);return d?g:g.data}catch(u){if(!r||!l)throw u;let a=await $.scanImage(e,{qrEngine:i,canvas:s,disallowCanvasResizing:o});return d?a:a.data}finally{t||$._postWorkerMessage(i,"close")}}setGrayscaleWeights(e,t,i,s=!0){$._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:i,useIntegerApproximation:s})}setInversionMode(e){$._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){return e&&console.warn("Specifying a worker path is not required and not supported anymore."),!$._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")?new BarcodeDetector({formats:["qr_code"]}):dn(()=>import("./qr-scanner-worker.min.56d417f3.js"),[]).then(t=>t.createWorker())}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,i=e.videoHeight,s=e.offsetWidth,o=e.offsetHeight,l=e.offsetLeft,r=e.offsetTop,d=window.getComputedStyle(e),u=d.objectFit,a=t/i,g=s/o;switch(u){case"none":var c=t,v=i;break;case"fill":c=s,v=o;break;default:(u==="cover"?a>g:a<g)?(v=o,c=v*a):(c=s,v=c/a),u==="scale-down"&&(c=Math.min(c,t),v=Math.min(v,i))}var[S,h]=d.objectPosition.split(" ").map((_,f)=>{const x=parseFloat(_);return _.endsWith("%")?(f?o-v:s-c)*x/100:x});d=this._scanRegion.width||t,g=this._scanRegion.height||i,u=this._scanRegion.x||0;var p=this._scanRegion.y||0;a=this.$overlay.style,a.width=`${d/t*c}px`,a.height=`${g/i*v}px`,a.top=`${r+h+p/i*v}px`,i=/scaleX\(-1\)/.test(e.style.transform),a.left=`${l+(i?s-S-c:S)+(i?t-u-d:u)/t*c}px`,a.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let i=t.x||0,s=t.y||0,o=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let l of e)l.x=l.x*o+i,l.y=l.y*t+s;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(s=>setTimeout(s,t-e)),this._lastScanTimestamp=Date.now();try{var i=await $.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(s){if(!this._active)return;this._onDecodeError(s)}!$._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=$.createQrEngine()),i?(this._onDecode?this._onDecode(i):this._legacyOnDecode&&this._legacyOnDecode(i.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(({x:s,y:o})=>`${s},${o}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==$.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],i=t.map(s=>Object.assign({},s,{[e]:{exact:this._preferredCamera}}));for(let s of[...i,...t])try{let o=await navigator.mediaDevices.getUserMedia({video:s,audio:!1}),l=this._getFacingMode(o)||(s.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:o,facingMode:l}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,i,s=!1){i=i||document.createElement("canvas");let o=t&&t.x?t.x:0,l=t&&t.y?t.y:0,r=t&&t.width?t.width:e.videoWidth||e.width,d=t&&t.height?t.height:e.videoHeight||e.height;return s||(s=t&&t.downScaledWidth?t.downScaledWidth:r,t=t&&t.downScaledHeight?t.downScaledHeight:d,i.width!==s&&(i.width=s),i.height!==t&&(i.height=t)),t=i.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(e,o,l,r,d,0,0,i.width,i.height),[i,t]}static async _loadImage(e){if(e instanceof Image)return await $._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await $._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((t,i)=>{let s=o=>{e.removeEventListener("load",s),e.removeEventListener("error",s),o instanceof ErrorEvent?i("Image load error"):t()};e.addEventListener("load",s),e.addEventListener("error",s)})}static async _postWorkerMessage(e,t,i,s){return $._postWorkerMessageSync(await e,t,i,s)}static _postWorkerMessageSync(e,t,i,s){if(!(e instanceof Worker))return-1;let o=$._workerMessageId++;return e.postMessage({id:o,type:t,data:i},s),o}}$.DEFAULT_CANVAS_SIZE=400;$.NO_QR_CODE_FOUND="No QR code found";$._disableBarcodeDetector=!1;$._workerMessageId=0;const[Ne,Le]=w(!1),[un,hn]=w({}),[Y,We]=w(""),[ke,Et]=w(""),[kt,fn]=w("");w("");const[F,I]=w(""),[cs,Je]=w(""),[G,fe]=w(0),[Lt,gn]=w(""),[pn,mn]=w(""),[vn,_n]=w(""),[yn,wn]=w(""),[$e,$n]=w(""),[be,bn]=w(""),[Ot,Tt]=w([]),[ge,ie]=w(""),[Ze,Se]=w(!1),[et,At]=w(!1),[tt,nt]=w(!1);w([]);const[Sn,xn]=w(!1),Cn=E("<button>toggle scanner</button>"),En=E('<div class="invoiceform payform"><h3>lightning invoice</h3><p><label>amount:</label> <span class="sats"></span> sats<br><label>memo:</label> <!> <br></p><span class="error"></span><button>pay</button><button>cancel</button></div>'),kn=E('<div class="lnurlpform payform"><h3>lnurlp, payment link</h3><label for="amount">Amount:<div class="info"><label>min. amount: </label><label>max. amount: </label><label>info: </label></div></label><input placeholder="100" type="number" class="amount" name="amount"><label for="comment">Comment:<div class="info"><label>max. characters: </label></div></label><textarea placeholder="comment..." id="comment" name="comment"></textarea><br><label for="bookmark1"><input id="bookmark1" name="bookmark" type="checkbox"> bookmark lnurl</label><span class="error"></span><button>pay</button><button>cancel</button></div>'),Ln=E('<div class="lnurlwform payform"><h3>lnurlw, withdraw link</h3><label for="amount">Amount: </label><label>min. amount: </label><label>max. amount: </label><input placeholder="100" type="number" class="amount" name="amount"><label for="bookmark2"><input id="bookmark2" name="bookmark" type="checkbox"> bookmark lnurl</label><span class="error"></span><button>withdraw</button><button>cancel</button></div>'),On=E('<section id="pay"><h3>pay invoice</h3><textarea placeholder="paste invoice (lnbc.) or LNURL here..." id="invoice" name="invoice" rows="6"></textarea></section>'),[qe,Tn]=w({}),[He,An]=w({}),[Rn,it]=w(!1),[Nn,st]=w(!1),[Dn,ot]=w(!1),[U,rt]=w(0),[lt,at]=w(0),[ct,dt]=w(0),[Pn,ut]=w(0),[In,Mn]=w(""),[Fn,Wn]=w(0),[Rt,qn]=w(!1),Hn=n=>{I(""),le.send({type:"pay",data:{bolt11:ge()}})},Un=n=>{let e=He(),t=U()*1e3;t>=e.minSendable&&t<=e.maxSendable?(I(""),le.send({type:"pay_lnurlp",data:{callback:e.callback,amount:t,comment:In()}})):I("ERROR: amount not in range")},jn=n=>{let e=He(),t=U()*1e3;t>=e.minWithdrawable&&t<=e.maxWithdrawable?(I(""),le.send({type:"pay_lnurlw",data:{callback:e.callback,amount:U(),k1:e.k1}})):I("ERROR: amount not in range")},Oe=n=>{ie("")};let Te=null;const Bn=n=>{let e=!Rt();qn(e),e?(Te=new $(document.getElementById("video"),t=>ie(t)),Te.start()):Te.stop()},Vn=n=>(qe().amount_msat/1e3).toLocaleString(),Qn=n=>qe().description,Xn=n=>{let e,t;n.stopPropagation(),n.preventDefault(),e=n.clipboardData||window.clipboardData,t=e.getData("Text"),ie(t)};function Yn(){return te(()=>{qe()&&it(!0)}),te(()=>{let n=He();if(n){if(n.tag==="payRequest"){Wn(n.commentAllowed);let e=JSON.parse(n.metadata)[0][1];ut(e),at(n.minSendable/1e3),dt(n.maxSendable/1e3),st(!0);let t=document.querySelector(".lnurlpform .amount");t&&t.focus()}if(n.tag==="withdrawRequest"){ot(!0),at(n.minWithdrawable/1e3),dt(n.maxWithdrawable/1e3),ut(n.defaultDescription);let e=document.querySelector(".lnurlwform .amount");e&&e.focus()}}}),te(()=>{ge()&&le.send({type:"invoice",data:{bolt11:ge()}}),I(""),it(!1),st(!1),ot(!1)}),(()=>{const n=On.cloneNode(!0),e=n.firstChild,t=e.nextSibling;return m(n,C(D,{get when(){return Sn()},get children(){return[(()=>{const i=Cn.cloneNode(!0);return i.$$click=Bn,i})()," ",ne(()=>Rt()?"on":"off")]}}),t),t.addEventListener("paste",Xn),m(n,C(D,{get when(){return Rn()},get children(){const i=En.cloneNode(!0),s=i.firstChild,o=s.nextSibling,l=o.firstChild,r=l.nextSibling,d=r.nextSibling,u=d.nextSibling,a=u.nextSibling,g=a.nextSibling,c=g.nextSibling,v=c.nextSibling;v.nextSibling;const S=o.nextSibling,h=S.nextSibling,p=h.nextSibling;return m(d,Vn),m(o,Qn,v),m(S,F),h.$$click=Hn,p.$$click=Oe,i}}),null),m(n,C(D,{get when(){return Nn()},get children(){const i=kn.cloneNode(!0),s=i.firstChild,o=s.nextSibling,l=o.firstChild,r=l.nextSibling,d=r.firstChild;d.firstChild;const u=d.nextSibling;u.firstChild;const a=u.nextSibling;a.firstChild;const g=o.nextSibling,c=g.nextSibling,v=c.firstChild,S=v.nextSibling,h=S.firstChild;h.firstChild;const p=c.nextSibling,_=p.nextSibling,f=_.nextSibling,x=f.nextSibling,y=x.nextSibling,A=y.nextSibling;return m(d,lt,null),m(u,ct,null),m(a,Pn,null),g.$$keyup=P=>rt(parseInt(P.currentTarget.value)),m(h,Fn,null),p.$$keyup=P=>Mn(P.currentTarget.value),m(x,F),y.$$click=Un,A.$$click=Oe,i}}),null),m(n,C(D,{get when(){return Dn()},get children(){const i=Ln.cloneNode(!0),s=i.firstChild,o=s.nextSibling,l=o.nextSibling;l.firstChild;const r=l.nextSibling;r.firstChild;const d=r.nextSibling,u=d.nextSibling,a=u.nextSibling,g=a.nextSibling,c=g.nextSibling;return m(l,lt,null),m(r,ct,null),d.$$keyup=v=>rt(parseInt(v.currentTarget.value)),m(a,F),g.$$click=jn,c.$$click=Oe,i}}),null),k(()=>n.className=F()?"error":""),k(()=>t.value=ge()),n})()}H(["click","keyup"]);const zn="0.0.2",Ue="https://local.b1tco1n.org",Nt="localhost:8000",Kn=`http://${Nt}`,Gn=`ws://${Nt}/ws`,je=`${Ue}/api/v1/qrcode/`,Jn=E("<button>create</button>"),Zn=E('<p><img class="qrcode" alt="invoice qrcode svg"></p>'),ei=E("<button>copy invoice</button>"),ti=E("<button>cancel</button>"),ni=E('<div class="invoiceform payform"><h3>create invoice</h3><label for="amount">Amount:</label><input placeholder="100" type="number" class="amount" name="amount"><label for="comment">Comment: </label><textarea placeholder="description..." name="description"></textarea><span class="error"></span><button>create</button><button>cancel</button></div>'),ii=E('<section id="create"><h3>create invoice</h3></section>'),[si,oi]=w(0),[ri,li]=w(0),[ht,Be]=w(!1),[ai,Dt]=w(!1),[xe,Pt]=w(""),ci=n=>{I(""),Be(!1),le.send({type:"create_invoice",data:{amount:si(),description:ri()}})},di=n=>{Be(!0)},ft=n=>{Pt(""),Be(!1),Dt(!1)},ui=()=>xe()?je+xe():"#",hi=()=>Qe(xe());function fi(){return te(()=>{let n=!!xe();Dt(n)}),(()=>{const n=ii.cloneNode(!0);return n.firstChild,m(n,C(D,{get when(){return!ht()},get children(){const e=Jn.cloneNode(!0);return e.$$click=di,e}}),null),m(n,C(D,{get when(){return ai()},get children(){return[(()=>{const e=Zn.cloneNode(!0),t=e.firstChild;return k(()=>W(t,"src",ui())),e})(),(()=>{const e=ei.cloneNode(!0);return e.$$click=hi,e})(),(()=>{const e=ti.cloneNode(!0);return e.$$click=ft,e})()]}}),null),m(n,C(D,{get when(){return ht()},get children(){const e=ni.cloneNode(!0),t=e.firstChild,i=t.nextSibling,s=i.nextSibling,o=s.nextSibling,l=o.nextSibling,r=l.nextSibling,d=r.nextSibling,u=d.nextSibling;return s.$$keyup=a=>oi(parseInt(a.currentTarget.value)),l.$$keyup=a=>li(a.currentTarget.value),m(r,F),d.$$click=ci,u.$$click=ft,e}}),null),k(()=>n.className=F()?"error":""),n})()}H(["click","keyup"]);B.setLevel(5);const Ve=(n,e,t=!0,i=null)=>{let s={credentials:"include"};if(i)if(s.method="POST",t)s.headers={"Content-Type":"application/json"},s.body=JSON.stringify(i);else{let o=new FormData;Object.keys(i).forEach(l=>{o.append(l,i[l])}),s.body=o}fetch(Kn+n,s).then(async o=>{if(o.status===401)throw new Error("unauthorized");if(!o.ok){let r={};try{r=await o.json()}catch{throw new Error("could not parse response json")}let d="";throw Array.isArray(r.detail)?d=r.detail.map(a=>a.loc[1]+": "+a.msg).join(`
`):d=r.detail,new Error(`${d}`)}return await o.json()}).then(e).catch(o=>{B.error(o),I(o.toString())})},pe=(n,e,t)=>{t||(t="/assets/favicon.ico"),"Notification"in window?Notification.permission==="granted"?new Notification(n,{body:e,icon:t}):Notification.permission!=="denied"&&Notification.requestPermission().then(i=>{i==="granted"&&new Notification(n,{body:e,icon:t})}):alert("This browser does not support desktop notification")},Qe=n=>{"clipboard"in navigator&&navigator.clipboard.writeText(n).then(function(){},function(e){pe("Clipboard","Error copying to clipboard")})},N={user:"user",pay:"pay",invoice:"invoice",create_invoice:"create_invoice",payment_received:"payment_received",error:"error",lnurl:"lnurl",lnurl_success:"lnurl_success",ping:"ping",pong:"pong",hello:"hello"};class gi{constructor(){this.ws=new WebSocket(Gn),this.ws.onerror=this.onerror,this.ws.onopen=this.onopen,this.ws.onmessage=this.onmessage,this.ws.onclose=this.onclose}send(e){this.ws.send(JSON.stringify(e))}onerror(e){Le(!1),Se(!0)}onclose(e){Le(!1),Se(!0)}onopen(e){this.send(JSON.stringify({type:N.user}))}onmessage(e){let t=JSON.parse(e.data);if(B.debug(t),t.type==N.user&&(Le(!0),hn(t.data)),t.type==N.payment_received){let i=t.data.amount/1e3,s=G()+i;pe("payment received!",`${i} sats
payment_hash: `+t.data.payment_hash),fe(s);let o=Ot();o.unshift(t.data),Tt(o)}if(t.type==N.pay){let i="invoice paid";Je(i),fe(G()-U()),pe(i,`${parseInt(U())} sats
payment_hash: `+t.data.payment_hash),ie("")}if(t.type==N.lnurl_success){let i=0;t.data.message=="withdrawn"?i=G()+parseInt(U()):i=G()-parseInt(U()),fe(i),Je(t.data.message),pe(t.data.message,`${parseInt(U())} sats
payment_hash: `+t.data.payment_hash),ie("")}t.type==N.invoice&&Tn(t.data),t.type==N.create_invoice&&Pt(t.data.invoice),t.type==N.error&&(I(t.message),B.error(t.type,t.message)),t.type==N.lnurl&&An(t.data),t&&t.type==N.ping&&this.send({type:N.pong}),t&&t.type==N.pong&&B.debug("received pong!!!")}}const pi=E('<div id="login"><h2>Login</h2><form method="POST"><input type="text" name="username" placeholder="username..."><input type="password" name="password" placeholder="password..."><span class="error"></span><input type="submit" value="login">&nbsp;or&nbsp;<span class="btn">signup</span></form></div>'),mi=n=>{At(!0),Se(!1)},vi=n=>(n.preventDefault(),I(""),Ve("/login",e=>{window.location="/"},!1,{username:Y(),password:ke()}),!1);function _i(){return(()=>{const n=pi.cloneNode(!0),e=n.firstChild,t=e.nextSibling,i=t.firstChild,s=i.nextSibling,o=s.nextSibling,l=o.nextSibling,r=l.nextSibling,d=r.nextSibling;return t.addEventListener("submit",vi),i.addEventListener("change",u=>We(u.currentTarget.value)),s.addEventListener("change",u=>Et(u.currentTarget.value)),m(o,F),d.$$click=mi,k(()=>t.className=F()?"error":""),k(()=>i.value=Y()),k(()=>s.value=ke()),n})()}H(["click"]);const yi=E('<div id="signup"><h2>Sign up</h2><form name="signup" method="POST"><input type="text" name="username" placeholder="username..."><input type="password" name="password" placeholder="password..."><input type="password" name="password-repeat" placeholder="password repeat..."><span class="error"></span><input type="submit" value="signup">&nbsp;or&nbsp;<span class="btn">login</span></form></div>'),wi=n=>{At(!1),Se(!0)},$i=n=>(n.preventDefault(),I(""),Ve("/signup",e=>{window.location="/"},!0,{username:Y(),password:ke(),password_repeat:kt()}),!1);function bi(){return(()=>{const n=yi.cloneNode(!0),e=n.firstChild,t=e.nextSibling,i=t.firstChild,s=i.nextSibling,o=s.nextSibling,l=o.nextSibling,r=l.nextSibling,d=r.nextSibling,u=d.nextSibling;return t.addEventListener("submit",$i),i.addEventListener("change",a=>We(a.currentTarget.value)),s.addEventListener("change",a=>Et(a.currentTarget.value)),o.addEventListener("change",a=>fn(a.currentTarget.value)),m(l,F),u.$$click=wi,k(()=>t.className=F()?"error":""),k(()=>i.value=Y()),k(()=>s.value=ke()),k(()=>o.value=kt()),n})()}H(["click"]);const Si=E('<section id="settings"><button>lnbits</button><button>settings</button><div id="settings-content"><h2>user info</h2><b>usr: </b> <br><b>wallet_id: </b> <br><b>api_key: </b> <br><button>hide settings</button></div></section>'),xi=()=>window.open(Ue+"/wallet?usr="+Lt(),"_blank");function Ci(){return(()=>{const n=Si.cloneNode(!0),e=n.firstChild,t=e.nextSibling,i=t.nextSibling,s=i.firstChild,o=s.nextSibling,l=o.nextSibling,r=l.nextSibling,d=r.nextSibling,u=d.nextSibling,a=u.nextSibling,g=a.nextSibling,c=g.nextSibling,v=c.nextSibling,S=v.nextSibling;return e.$$click=xi,t.$$click=h=>nt(!0),m(i,Lt,r),m(i,pn,a),m(i,vn,v),S.$$click=h=>nt(!1),k(h=>{const p=tt()===!0?"hidden":"",_=tt()===!1?"hidden":"";return p!==h._v$&&j(t,h._v$=p),_!==h._v$2&&j(i,h._v$2=_),h},{_v$:void 0,_v$2:void 0}),n})()}H(["click"]);const Ei=E("<button>logout</button>"),ki=()=>(Ve("/logout",n=>{window.location="/"},!1),!1);function Li(){return(()=>{const n=Ei.cloneNode(!0);return n.$$click=ki,n})()}H(["click"]);const Oi=E('<section id="paylinks"><div id="paylink" class="paylink"><h3>receive</h3><p>with this link you can receive sats.</p><p><img class="qrcode" alt="lnurlp qr"></p><p></p><p><button>Copy lnurlp</button></p></div><div id="withdrawlink" class="paylink"><h3>withdraw</h3><p>with this link you can withdraw sats. DO NOT SHARE</p><p><img class="qrcode" alt="lnurlp qr"></p><p></p><p><button>Copy withdrawlink</button></p></div></section>'),Ti=()=>$e()?je+$e():"#",Ai=()=>Qe($e()),Ri=()=>be()?je+be():"#",Ni=()=>Qe(be());function Di(){return(()=>{const n=Oi.cloneNode(!0),e=n.firstChild,t=e.firstChild,i=t.nextSibling,s=i.nextSibling,o=s.firstChild,l=s.nextSibling,r=l.nextSibling,d=r.firstChild,u=e.nextSibling,a=u.firstChild,g=a.nextSibling,c=g.nextSibling,v=c.firstChild,S=c.nextSibling,h=S.nextSibling,p=h.firstChild;return m(l,$e),d.$$click=Ai,m(S,be),p.$$click=Ni,k(_=>{const f=Ti(),x=Ri();return f!==_._v$&&W(o,"src",_._v$=f),x!==_._v$2&&W(v,"src",_._v$2=x),_},{_v$:void 0,_v$2:void 0}),n})()}H(["click"]);const Pi=E('<section id="tpos"><button>pos</button></section>'),Ii=()=>window.open(Ue+"/tpos/"+yn(),"_blank");function Mi(){return(()=>{const n=Pi.cloneNode(!0),e=n.firstChild;return e.$$click=Ii,n})()}H(["click"]);const Fi=E('<section id="dashboard"><section id="user-info"><img alt="logo"><div class="user-info-content"><h2>welcome <!>!</h2><p>Email Address: <a></a><br>Lightning Address: <a></a><br>Website: <a></a></p></div></section><nav></nav><section id="balance-section"><h1 id="balance"><span id="sats"></span> sats</h1></section></section>'),Ce=()=>Y()+"@b1tco1n.org",Wi=()=>"lightning:"+Ce(),qi=()=>"mailto:"+Ce(),It=()=>Y()+".b1tco1n.org",Hi=()=>"https://"+It(),Ui=()=>G()?G().toLocaleString():0;function ji(){return te(()=>{let n=un();We(n.username),gn(n.usr),mn(n.wallet_id),_n(n.api_key),$n(n.lnurlp),bn(n.lnurlw),wn(n.tpos),fe(n.balance),Tt(n.payments)}),(()=>{const n=Fi.cloneNode(!0),e=n.firstChild,t=e.firstChild,i=t.nextSibling,s=i.firstChild,o=s.firstChild,l=o.nextSibling;l.nextSibling;const r=s.nextSibling,d=r.firstChild,u=d.nextSibling,a=u.nextSibling,g=a.nextSibling,c=g.nextSibling,v=c.nextSibling,S=v.nextSibling,h=S.nextSibling,p=e.nextSibling,_=p.nextSibling,f=_.firstChild,x=f.firstChild;return W(t,"src",Ct),m(s,Y,l),m(u,Ce),m(c,Ce),m(h,It),m(p,C(Mi,{}),null),m(p,C(Ci,{}),null),m(p,C(Li,{}),null),m(x,Ui),m(n,C(Yn,{}),null),m(n,C(fi,{}),null),m(n,C(Di,{}),null),k(y=>{const A=Ne()===!0?"active":"",P=he.logo,ce=qi(),z=Wi(),b=Hi();return A!==y._v$&&j(n,y._v$=A),P!==y._v$2&&j(t,y._v$2=P),ce!==y._v$3&&W(u,"href",y._v$3=ce),z!==y._v$4&&W(c,"href",y._v$4=z),b!==y._v$5&&W(h,"href",y._v$5=b),y},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),n})()}const Bi=E('<section id="payments"><h3>payments</h3><ul id="payment-list"></ul></section>'),Vi=E("<div>no payments</div>"),Qi=E('<li><span class="amount"> sats</span><span class="date"></span><span class="memo"></span></li>'),Xi=n=>(n/1e3).toLocaleString(),Yi=n=>{let e=n.pending?"pending ":"";return e+=n.amount>0?"receive":"sent",e},zi=n=>new Date(n*1e3).toLocaleString();function Ki(){return(()=>{const n=Bi.cloneNode(!0),e=n.firstChild,t=e.nextSibling;return m(t,C(en,{get each(){return Ot()},get fallback(){return Vi.cloneNode(!0)},children:(i,s)=>(()=>{const o=Qi.cloneNode(!0),l=o.firstChild,r=l.firstChild,d=l.nextSibling,u=d.nextSibling;return m(l,()=>Xi(i.amount),r),m(o,()=>i.pending?"pending ":"",d),m(d,()=>zi(i.time)),m(u,()=>i.memo),k(a=>{const g=Yi(i),c=s();return g!==a._v$&&j(o,a._v$=g),c!==a._v$2&&W(o,"key",a._v$2=c),a},{_v$:void 0,_v$2:void 0}),o})()})),n})()}const Gi=E('<img alt="logo">'),Ji=E('<div class="ring">Loading<span></span></div>'),Zi=E('<div><section id="main"></section><footer><button>rainbow</button><button>hole</button>- made with \u2764\uFE0F by <a target="_blank" href="https://www.twitter.com/dnilabs">dni</a><p>b1tco1n.org, wallet based on <a target="_blank" href="https://lnbits.com/">lnbits</a>, version: </p></footer></div>'),le=new gi,es=()=>document.body.classList.toggle("rainbow"),ts=()=>document.body.classList.toggle("hole"),ns=()=>("serviceWorker"in navigator&&navigator.serviceWorker.register("./service-worker.js",{scope:"./"}).then(n=>{B.info(`Registration succeeded. Scope is ${n.scope}`)}),$.hasCamera().then(xn),(()=>{const n=Zi.cloneNode(!0),e=n.firstChild,t=e.nextSibling,i=t.firstChild,s=i.nextSibling,o=s.nextSibling,l=o.nextSibling,r=l.nextSibling;return r.firstChild.nextSibling.nextSibling,m(e,C(D,{get when(){return Ne()},get children(){return[C(ji,{}),C(Ki,{})]}}),null),m(e,C(D,{get when(){return!Ne()},get children(){return[(()=>{const a=Gi.cloneNode(!0);return W(a,"src",Ct),k(()=>j(a,he.logo)),a})(),C(D,{get when(){return ne(()=>!Ze())()&&!et()},get children(){return Ji.cloneNode(!0)}}),C(D,{get when(){return Ze()},get children(){return C(_i,{})}}),C(D,{get when(){return et()},get children(){return C(bi,{})}})]}}),null),i.$$click=es,s.$$click=ts,m(r,zn,null),k(a=>{const g=he.App,c=he.header;return g!==a._v$&&j(n,a._v$=g),c!==a._v$2&&j(e,a._v$2=c),a},{_v$:void 0,_v$2:void 0}),n})());H(["click"]);var De=document.querySelector("canvas"),R=De.getContext("2d"),Mt=0,Ae=.005,Xe=.01,J,ae,Z,ee,Ee=400,Pe=4,is=Ee/Pe,gt=Ee*.25,pt=7;const ss=function(){mt(),Ft(),window.addEventListener("resize",mt),window.addEventListener("mousedown",ls),document.addEventListener("touchstart",as)};function mt(){J=De.width=window.innerWidth,ae=De.height=window.innerHeight}function Ft(){Mt+=Ae,Ae+=(Xe-Ae)*.01,os(),rs(),requestAnimationFrame(Ft)}function os(){R.clearRect(0,0,J,ae)}function rs(){var n,e,t=J/2,i=ae/2;R.globalCompositeOperation="lighter",R.strokeStyle="#000",R.lineWidth=2,R.beginPath();for(var s=is;s>0;s--){var o=s*Pe+Mt%Pe,l=Math.sin(o/pt)*Math.PI,r=Math.cos(o/pt)*Math.PI;n=l*o,e=r*o*.35;var d=1-Math.min(o,gt)/gt;e-=Math.pow(d,2)*200,e+=200*o/Ee,e+=n/t*J*.1,R.globalAlpha=1-o/Ee,R.lineTo(t+n,i+e),R.stroke(),R.beginPath(),R.moveTo(t+n,i+e)}R.lineTo(t,i-200),R.lineTo(t,0),R.stroke()}function ls(n){Z=n.clientX,ee=n.clientY,document.addEventListener("mousemove",Wt),document.addEventListener("mouseup",qt)}function Wt(n){var e=(n.clientX-Z)/1e3,t=(n.clientY-ee)/1e3;n.clientY<ae/2&&(e*=-1),n.clientX>J/2&&(t*=-1),Xe=e+t,Z=n.clientX,ee=n.clientY}function qt(n){document.removeEventListener("mousemove",Wt),document.removeEventListener("mouseup",qt)}function as(n){n.preventDefault(),Z=n.touches[0].clientX,ee=n.touches[0].clientY,document.addEventListener("touchmove",Ht),document.addEventListener("touchend",Ut)}function Ht(n){var e=(n.touches[0].clientX-Z)/1e3,t=(n.touches[0].clientY-ee)/1e3;n.touches[0].clientY<ae/2&&(e*=-1),n.touches[0].clientX>J/2&&(t*=-1),Xe=e+t,Z=n.touches[0].clientX,ee=n.touches[0].clientY}function Ut(n){document.removeEventListener("touchmove",Ht),document.removeEventListener("touchend",Ut)}B.setLevel("debug");B.info("debugging is enabled");ss();nn(()=>C(ns,{}),document.getElementById("root"));
